<app-sidebar></app-sidebar>

<body class="bg-gray-100 font-sans">
    <div class="containers w-full px-2 py-1">
        <div class=" mx-auto bg-white rounded-lg shadow-md overflow-hidden">
            <!-- Course Header -->
            <div class="md:flex  p-6">
                <div class="md:flex-shrink-0">
                    <img class="h-40 w-full object-cover md:w-48 rounded-lg" [src]="course.thumbnail"
                        alt="Course Image">
                </div>
                <div class="md:ms-12" *ngIf="course">
                    <div class="uppercase tracking-wide text-sm text-indigo-500 font-semibold">Workouts</div>
                    <h1 class="mt-2 text-2xl font-bold text-gray-900 sm:text-3xl">{{course.courseName}}</h1>
                    <h3 class="text-lg font-medium text-gray-900">Trainer : {{course.author}}</h3>
                    <h3 class="text-lg font-medium text-gray-900">Language : English</h3>
                    <p class="mt-2 text-gray-600">{{course.description}}</p>
                </div>



            </div>

            <!-- Course Details -->
            <div class="px-8 py-6 border-t border-gray-200">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

                    <div>
                        <h2 class="text-lg font-semibold text-gray-900">Modules</h2>
                        <p-accordion [activeIndex]="0" *ngIf="course.modules ">
                            <p-accordionTab *ngFor="let module of course.modules;  let i = index"
                                [header]="module.name">

                                <div class="flex justify-between">
                                    <button *ngIf="module.id" (click)="openVideoModal(module.id)">
                                        <p class="m-2 flex items-center">
                                            <img width="30" height="30" class="m-2"
                                                src="https://img.icons8.com/ios/50/circled-play--v1.png"
                                                alt="circled-play--v1" /> {{ module.name }}
                                        </p>
                                    </button>



                                    <div *ngIf="purchasedCourses" class="flex items-center">

                                        <input id="link-checkbox" type="checkbox"
                                            [checked]="purchasedCourses.modules[i].completed"
                                            (change)="toggleCompletion( purchasedCourses.modules[i])"
                                            class="text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                        <label for="link-checkbox"
                                            class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">
                                            <span class="text-blue-600 dark:text-blue-500 hover:underline">Mark as
                                                Complete</span>
                                        </label>



                                    </div>

                                </div>

                            </p-accordionTab>
                        </p-accordion>
                    </div>

                    <div class="my-auto">
                        <div class="mb-1 text-base font-medium text-green-700 dark:text-green-500 text-center">Course
                            Progress</div>
                        <div class="flex justify-center items-center">
                            <div class="w-1/2 bg-gray-300 rounded-full h-4 mb-4 dark:bg-gray-700 relative">
                                <div class="bg-green-600 h-4 rounded-full dark:bg-green-500"
                                    [ngStyle]="{ 'width': progressPercentage + '%' }"></div>
                                <div class="absolute inset-0 flex justify-center items-center text-white font-bold">
                                    {{ progressPercentage.toFixed(0) }}%
                                </div>
                            </div>
                        </div>
                    </div>

                    <img width="48" height="48" src="https://img.icons8.com/color/48/task-completed.png" alt="task-completed"/>



                </div>
            </div>






        </div>
    </div>



    <div *ngIf="showVideoModal"
        class="fixed inset-0 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center">
        <div class="relative p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white">
            <div class="mt-3 text-center">
                <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Course Video</h3>
                <div class="mt-2 px-7 py-3">
                    <video controls class="w-full " autoplay>
                        <source [src]="coursevideo" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
                <div class="items-center px-4 py-3">
                    <button (click)="closeVideoModal()"
                        class="px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md w-1/2 shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-gray-300">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

</body>